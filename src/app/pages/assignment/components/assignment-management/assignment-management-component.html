<div class="assignment-page">
  <div class="page-header">
    <button mat-raised-button color="primary" class="add-mission-btn" (click)="onAddMission()">
      <mat-icon>add</mat-icon>
      {{ addMissionLabel }}
    </button>
    @if (showViewResults()) {
      <button
        mat-raised-button
        color="accent"
        class="submit-btn"
        (click)="onViewResults()">
        View Results
      </button>
    } @else {
      <button
        mat-raised-button
        color="primary"
        class="submit-btn"
        [disabled]="isSubmitDisabled"
        (click)="onSubmit()">
        {{ submitLabel }}
      </button>
    }
  </div>

  <div class="missions-container">
    @for (missionId of missionIds; track trackByMissionId($index, missionId)) {
      <app-mission-component 
        [autoGeneratedId]="missionId" 
        [mission]="storedMissions[missionId] || null"
        (remove)="onRemoveMission(missionId)"
        (formChange)="onFormChange()">
      </app-mission-component>
    }
  </div>
</div>
